# 파일 임의 접근
- 순차 접근 : 파일의 처음이나 끝부터 데이터를 입출력하는 방식
- 임의 접근 : 파일의 중간 부분 즉, 임의의 위치에서부터 데이터를 입출력하는 방식
    (이 방식은 파일 내부 위치를 바이트 단위로 나타내는 파일 위치 지시자를 이용하여 파일에 접근한다.)


## 파일 위치 지시자

SEEK_SET : 값은 0이고 파일의 처음을 의미한다.

SEEK_CUR : 값은 1이고 파일에서 현재 위치를 의미한다.

SEEK_END : 값은 2이고 파일의 끝을 의미한다.


- 파일에 임의 접근하는 함수는 fseek(), fsetpos(), fgetpos() 등으로 함수명을 보면 어떤 역학을 하는지 알 수 있다. 
    - fseek()함수는 파일에서 특정위치를 찾을 때 사용한다.
    - fsetpos() 함수는 파일에서 특정 위치를 정할 때 사용한다.
    - fgetpos() 함수는 파일 포인터가 가리키는 위치를 얻기 위해 사용한다.



## fseek() 함수의 형식
    int *fseek(FILE* fp, long offset, int origin)

- 인자 1 : FILE 포인터(FILE* fp)
- 인자 2 : origin 위치부터 새로운 위치까지 상대적으로 떨어진 거리(단위는 바이트이다.)(long offset)
- 인자 3 : 파일 위치 지시자(int origin)
- 반환값 : 성공할 경우 0, 오류가 발생하면 0 이외의 값을 반환한다.


- fseek() 함수는 파일 위치 지시자가 원래 있었던 지점에서 사용자가 원하는 간격만큼 파일 위치 지시자를 이동한다. 해당 함수는 이진 모드 파일에서만 위치를 제대로 찾아갈 수 있다.



## 사용 예
- fseek(fp, 100L, SEEK_SET) : 파일 위치 지시자가 가리키는 위치를 파일의 처름 위치에서 100바이트 이동하라는 의미이다.
- fseek(fp, 100L, SEEK_CUR) : 파일 위치 지시자가 가리키는 위치를 파일의 현재 위치에서 100바이트 이동하라는 의미이다.
- fseek(fp, 100L, SEEK_END) : 파일 위치 지시자가 가리키는 위치를 파일의 끝에서 100바이트 앞으로 이동하라는 의미이다.


## fgetpos() 함수의 형식
    fgetpos(FILE* fp, fpos_t* pos);

- 인자 1 : FILE포인터(FILE* fp)
- 인자 2 : 현재 파일 위치 지시자가 가리키는 위치를 저장하는 포인터(fpos_t* pos)
- 반환값 : 성공할 경우 0, 오류가 발생하면 0이외의 값을 반환


- fgetpos() 함수는 파일 내에서 파일 위치 지시자가 가리키는 현재 위치를 포인터 pos에 저장한다. fpos_t는 파일 위치를 나타내는 자료형으로 long형을 재정의(typedef long fpos_t)한 것이다.


## fsetpos() 함수의 형식
    fsetpos(FILE *fp, const fpos_t* pos);

- 인자 1 : FILE 포인터(FILE *fp)
- 인자 2 : 이동하고자 하는 파일 위치 지시자의 새로운 위치(const fpos_t* pos)
- 반환값 : 성공할 경우 0, 오류가 발생하면 0이외의 값을 반환한다. 


- fsetpos() 함수를 사용하려면 반드시 fsetpos() 함수를 통해 pos값을 가지고 있어야 한다.